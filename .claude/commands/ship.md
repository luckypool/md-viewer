# /ship - PR作成・レビュー・マージコマンド

変更をプルリクエストとして出し、セルフレビューを行い、問題なければマージまで完了するワークフローコマンドです。

## 使用方法

```
/ship [ブランチ名]
```

ブランチ名を指定しない場合は、現在のブランチを使用します。

## ワークフロー

### ステップ 1: PR作成

1. 現在のブランチの変更を確認
2. `git status` と `git diff main...HEAD` で差分を把握
3. 適切なタイトルと説明文でPRを作成

```bash
gh pr create --title "タイトル" --body "説明"
```

### ステップ 2: セルフレビュー

以下の観点でコードをレビュー:

#### 型安全性
- `any` の使用がないか
- 適切な型定義がされているか

#### コード品質
- DRY原則に従っているか
- 不要なコードがないか
- 命名が明確か

#### セキュリティ
- 機密情報がハードコードされていないか
- XSS/インジェクション対策

#### 機能性
- 意図した動作をするか
- エッジケースの考慮

### ステップ 3: レビューコメント投稿

```bash
gh pr review --comment --body "レビュー内容"
```

### ステップ 4: 問題対応

#### 問題がある場合
1. 問題点を修正
2. コミット&プッシュ
3. ステップ2に戻る

#### 問題がない場合
1. PRを承認

```bash
gh pr review --approve --body "LGTM"
```

### ステップ 5: マージ

```bash
gh pr merge --merge --delete-branch
```

## レビュー出力フォーマット

```markdown
## PR レビュー: #[PR番号]

### 変更概要
- [変更内容のサマリー]

### チェック項目
- [ ] 型エラーなし (`npx tsc --noEmit`)
- [ ] コード品質OK
- [ ] セキュリティ問題なし

### レビュー結果

#### 良い点
- ...

#### 要修正（あれば）
- **ファイル:行XX**: [問題の説明]
  - 修正方法: ...

### 判定
- [ ] LGTM - マージ可能
- [ ] 要修正 - 修正後再レビュー
```

## 注意事項

- mainブランチへの直接pushは避ける
- 必ず型チェックを通してからマージ
- コンフリクトがある場合は解消してから進める
